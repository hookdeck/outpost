/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { tenantsDelete } from "../funcs/tenantsDelete.js";
import { tenantsGet } from "../funcs/tenantsGet.js";
import { tenantsGetPortalUrl } from "../funcs/tenantsGetPortalUrl.js";
import { tenantsGetToken } from "../funcs/tenantsGetToken.js";
import { tenantsListTenants } from "../funcs/tenantsListTenants.js";
import { tenantsUpsert } from "../funcs/tenantsUpsert.js";
import { ClientSDK, RequestOptions } from "../lib/sdks.js";
import * as components from "../models/components/index.js";
import * as operations from "../models/operations/index.js";
import { unwrapAsync } from "../types/fp.js";

export class Tenants extends ClientSDK {
  /**
   * List Tenants
   *
   * @remarks
   * List all tenants with cursor-based pagination.
   *
   * **Requirements:** This endpoint requires Redis with RediSearch module (e.g., `redis/redis-stack-server`).
   * If RediSearch is not available, this endpoint returns `501 Not Implemented`.
   *
   * The response includes lightweight tenant objects without computed fields like `destinations_count` and `topics`.
   * Use `GET /tenants/{tenant_id}` to retrieve full tenant details including these fields.
   */
  async listTenants(
    request: operations.ListTenantsRequest,
    options?: RequestOptions,
  ): Promise<components.TenantListResponse> {
    return unwrapAsync(tenantsListTenants(
      this,
      request,
      options,
    ));
  }

  /**
   * Create or Update Tenant
   *
   * @remarks
   * Idempotently creates or updates a tenant. Required before associating destinations.
   */
  async upsert(
    request: operations.UpsertTenantRequest,
    options?: RequestOptions,
  ): Promise<components.Tenant> {
    return unwrapAsync(tenantsUpsert(
      this,
      request,
      options,
    ));
  }

  /**
   * Get Tenant
   *
   * @remarks
   * Retrieves details for a specific tenant.
   */
  async get(
    request: operations.GetTenantRequest,
    options?: RequestOptions,
  ): Promise<components.Tenant> {
    return unwrapAsync(tenantsGet(
      this,
      request,
      options,
    ));
  }

  /**
   * Delete Tenant
   *
   * @remarks
   * Deletes the tenant and all associated destinations.
   */
  async delete(
    request: operations.DeleteTenantRequest,
    options?: RequestOptions,
  ): Promise<components.SuccessResponse> {
    return unwrapAsync(tenantsDelete(
      this,
      request,
      options,
    ));
  }

  /**
   * Get Portal Redirect URL
   *
   * @remarks
   * Returns a redirect URL containing a JWT to authenticate the user with the portal.
   */
  async getPortalUrl(
    request: operations.GetTenantPortalUrlRequest,
    options?: RequestOptions,
  ): Promise<components.PortalRedirect> {
    return unwrapAsync(tenantsGetPortalUrl(
      this,
      request,
      options,
    ));
  }

  /**
   * Get Tenant JWT Token
   *
   * @remarks
   * Returns a JWT token scoped to the tenant for safe browser API calls.
   */
  async getToken(
    request: operations.GetTenantTokenRequest,
    options?: RequestOptions,
  ): Promise<components.TenantToken> {
    return unwrapAsync(tenantsGetToken(
      this,
      request,
      options,
    ));
  }
}
