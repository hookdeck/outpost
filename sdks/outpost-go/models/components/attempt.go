// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package components

import (
	"encoding/json"
	"errors"
	"fmt"
	"github.com/hookdeck/outpost/sdks/outpost-go/internal/utils"
	"time"
)

// Status - The attempt status.
type Status string

const (
	StatusSuccess Status = "success"
	StatusFailed  Status = "failed"
)

func (e Status) ToPointer() *Status {
	return &e
}
func (e *Status) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "success":
		fallthrough
	case "failed":
		*e = Status(v)
		return nil
	default:
		return fmt.Errorf("invalid value for Status: %v", v)
	}
}

type EventUnionType string

const (
	EventUnionTypeEventSummary EventUnionType = "EventSummary"
	EventUnionTypeEventFull    EventUnionType = "EventFull"
)

// EventUnion - The associated event object. Only present when include=event or include=event.data.
type EventUnion struct {
	EventSummary *EventSummary `queryParam:"inline" union:"member"`
	EventFull    *EventFull    `queryParam:"inline" union:"member"`

	Type EventUnionType
}

func CreateEventUnionEventSummary(eventSummary EventSummary) EventUnion {
	typ := EventUnionTypeEventSummary

	return EventUnion{
		EventSummary: &eventSummary,
		Type:         typ,
	}
}

func CreateEventUnionEventFull(eventFull EventFull) EventUnion {
	typ := EventUnionTypeEventFull

	return EventUnion{
		EventFull: &eventFull,
		Type:      typ,
	}
}

func (u *EventUnion) UnmarshalJSON(data []byte) error {

	var eventSummary EventSummary = EventSummary{}
	if err := utils.UnmarshalJSON(data, &eventSummary, "", true, nil); err == nil {
		u.EventSummary = &eventSummary
		u.Type = EventUnionTypeEventSummary
		return nil
	}

	var eventFull EventFull = EventFull{}
	if err := utils.UnmarshalJSON(data, &eventFull, "", true, nil); err == nil {
		u.EventFull = &eventFull
		u.Type = EventUnionTypeEventFull
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for EventUnion", string(data))
}

func (u EventUnion) MarshalJSON() ([]byte, error) {
	if u.EventSummary != nil {
		return utils.MarshalJSON(u.EventSummary, "", true)
	}

	if u.EventFull != nil {
		return utils.MarshalJSON(u.EventFull, "", true)
	}

	return nil, errors.New("could not marshal union type EventUnion: all fields are null")
}

// Attempt - An attempt represents a single delivery attempt of an event to a destination.
type Attempt struct {
	// Unique identifier for this attempt.
	ID *string `json:"id,omitempty"`
	// The tenant this attempt belongs to.
	TenantID *string `json:"tenant_id,omitempty"`
	// The attempt status.
	Status *Status `json:"status,omitempty"`
	// Time the attempt was made.
	Time *time.Time `json:"time,omitempty"`
	// Response status code or error code.
	Code *string `json:"code,omitempty"`
	// Response data from the attempt. Only included when include=response_data.
	ResponseData map[string]any `json:"response_data,omitempty"`
	// The attempt number (1 for first attempt, 2+ for retries).
	AttemptNumber *int64 `json:"attempt_number,omitempty"`
	// Whether this attempt was manually triggered (e.g., a retry initiated by a user).
	Manual *bool `json:"manual,omitempty"`
	// The ID of the associated event.
	EventID *string `json:"event_id,omitempty"`
	// The destination ID this attempt was sent to.
	DestinationID *string `json:"destination_id,omitempty"`
	// The associated event object. Only present when include=event or include=event.data.
	Event *EventUnion `json:"event,omitempty"`
}

func (a Attempt) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(a, "", false)
}

func (a *Attempt) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &a, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (a *Attempt) GetID() *string {
	if a == nil {
		return nil
	}
	return a.ID
}

func (a *Attempt) GetTenantID() *string {
	if a == nil {
		return nil
	}
	return a.TenantID
}

func (a *Attempt) GetStatus() *Status {
	if a == nil {
		return nil
	}
	return a.Status
}

func (a *Attempt) GetTime() *time.Time {
	if a == nil {
		return nil
	}
	return a.Time
}

func (a *Attempt) GetCode() *string {
	if a == nil {
		return nil
	}
	return a.Code
}

func (a *Attempt) GetResponseData() map[string]any {
	if a == nil {
		return nil
	}
	return a.ResponseData
}

func (a *Attempt) GetAttemptNumber() *int64 {
	if a == nil {
		return nil
	}
	return a.AttemptNumber
}

func (a *Attempt) GetManual() *bool {
	if a == nil {
		return nil
	}
	return a.Manual
}

func (a *Attempt) GetEventID() *string {
	if a == nil {
		return nil
	}
	return a.EventID
}

func (a *Attempt) GetDestinationID() *string {
	if a == nil {
		return nil
	}
	return a.DestinationID
}

func (a *Attempt) GetEvent() *EventUnion {
	if a == nil {
		return nil
	}
	return a.Event
}
